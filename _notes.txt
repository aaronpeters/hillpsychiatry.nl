TODO:

- Test on WPT: Clear Cert Caches (ask Pat what this does, exactly)
- Test on WPT: DV cert tests for all browsers


---------


TL;DR
- EV cert expensive but not more secure
- No added value because browsers don't show the 'green bar' anymore
- EV vs DV, performance is worse: 
	a) Very limited ability to do H/2 connection pooling with an EV certificate
	b) TLS handshake time is higher because of bigger cert byte size (= extra roundtrip(s))
	c) TLS handshake time is higher because revocation status check (= blocking request to CA), 
	d) Reliability of your site depends on speed / availability of CA's infra
- The revocation status check ... when do browsers do this for EV certs? "It depends" and "It's complex"



A) H/2 connection pooling

- H/2 has connection pooling: domains that have same cert and same server IP will share the connection to the client (=good)
- Use same EV cert on all domains? possible, but will cost you ($$$) and no can haz wildcard, so unlikely you do this, so no connection pooling (=bad)


domain sharding is a bad practice with H/2, but if you _do_ shard and use the same cert and server IP for both domains, the sharding is non-issue because of connection pooling
- domain sharding and use same EV cert on all domains? Possible, but will cost you ($$$) and no can haz wildcard
- so if you don't use same cert, connection pooling will not happen :(

- EV is generally substantially more expensive ($$$) to have multiple host names, and you can't have wildcards
- so, like KPN, each FQDN will have it's own cert and so separate connection to each FQDN instead of the better connection pooling
- KPN don't do H/2, but if they would, no connection pooling across domains for them

- WPT waterfall chart clearly shows Chrome a) does revoke check for each FQDN with a EV cert


B) Cert size

- impacts performance because cert may not fit in first burst (initcwnd)
- EV cert size varies greatly amongst CA's


C) Revocation status check




WPT test results show this, DV versus EV
- Chrome		
- FF			
- Edge/Chromium		setDnsName not working	
- iPad iOS x.x 		setDnsName not working	and WPT test device will not download the bloom filter
- IE11			setDnsName not working	

But, WPT is not representative for the real world of all the device/OS/browser/connection combinations:
- Apple devices: if connected to power and WiFi ...
- Chrome: local caching and CRLsets 
- FF: 


EV certs: often, but not always will the cert revoke check happen:
- local caching is in play
- Apple's bloom filter = file with the status of every publicly trusted website certificate, downloaded weekly;
	- "No/Definitely not revoked": CA is not contacted
	- "Not sure" or "Yes/Revoked": contact the CA: 
		- bloom filter says "Yes/Revoked" and CA says "No, not revoked": connection continues 
		- bloom filter says "Not sure" and CA says "Yes, definitely revoked": certificate is treated as revoked

