<!doctype html>

<html lang="en" class="js ">
<head>
  <meta charset="utf-8">

  <!--[if IE]><![endif]-->

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Iframe - setTimeout()</title>
  <meta name="description" content="">
</head>

<body>
	<h1>Iframe - setTimeout()</h1>
		
	<ul>
		<li>Iframe is created dynamically with JS, via the Meebo Bar trick
		<li>Creation of iframe happens *before* onload
		<li>Onload of the iframe fires instantly, because the iframe content is loaded after onload (yeah!)
		<li>Onload of main page fires soon: the iframe does *not* delay the main page onload !
		<li>Why does the iframe not block main page onload? Well, that is because of the <code>&lt;body onload=""&gt;</code>
		<li>If you would *not* use the onload handler in the iframe, the iframe loading would delay the main page onload
		<li>While the iframe is loading, one or more browser busy indicators show something is loading
	</ul>
	
	<p>
		<img src="http://www.aaronpeters.nl/sandbox/images/calendar.png" width="128" height="128" alt=""><br>
	</p>
	
<iframe id="iframe1" src="" width="200" height="100" border="2"></iframe>
<script>
function setIframeSrc() {
	var a = Math.random() + "";
	var t = a * 10000000000000;
	var s = "http://1.cuzillion.com/bin/resource.cgi?type=gif&sleep=2&n=1&t=" + t;
    var iframe1 = document.getElementById('iframe1');
    if ( -1 == navigator.userAgent.indexOf("MSIE") ) {
        iframe1.src = s;
    }
    else {
        iframe1.location = s;
    }
}

setTimeout(setIframeSrc, 5);
</script>

</body>
</html>

<!-- 
IE8: 
-->